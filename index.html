PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KPHRpdGxlPkJvbmtleXdvcmxkPC90aXRsZT4KPHN0eWxlPgogIGJvZHkgewogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMDsKICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9CiAgI2xvZ2luIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNTAlOwogICAgbGVmdDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgfQogICNsb2dpbiBpbnB1dCB7CiAgICBtYXJnaW46IDVweCAwOwogICAgcGFkZGluZzogOHB4OwogICAgd2lkdGg6IDIwMHB4OwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICB9CiAgI2xvZ2luIGJ1dHRvbiB7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgZm9udC1zaXplOiAxNnB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYmFja2dyb3VuZDogIzM0OThkYjsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICB9CiAgI2NoYXQtdWkgewogICAgZGlzcGxheTogbm9uZTsKICAgIHdpZHRoOiAxMDB2dzsKICAgIGhlaWdodDogMTAwdmg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwOwogIH0KICAjd29ybGQgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IGNhbGMoMTAwJmgiIC0gODBweCk7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2NjYzsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBiYWNrZ3JvdW5kOiAjZTBlOGYwOwogIH0KICAucGxhY2Vob2xkZXIgewogICAgd2lkdGg6IDUwcHg7CiAgICBoZWlnaHQ6IDUwcHg7CiAgICBiYWNrZ3JvdW5kOiAjMzQ5OGRiOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgY3Vyc29yOiBncmFiOwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGZvbnQtc2l6ZTogMTBweDsKICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsKICB9CiAgLnNwZWVjaC1idWJibGUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICBwYWRkaW5nOiA4cHggMTJweDsKICBib3JkZXItcmFkaXVzOiAxMnB4OwogIGZvbnQtc2l6ZTogMTJweDsKICBtYXgtd2lkdGg6IDE1MHB4OwogIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOwogIHotaW5kZXg6IDEwMDsKICBhbmltYXRpb246IGZhZGVJbiAwLjNzOwogIHRvcDogLTQwcHg7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgY29sb3I6ICMzMzM7CiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKfQouc3BlZWNoLWJ1YmJsZTo6YWZ0ZXIgewogIGNvbnRlbnQ6ICcnOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IC0xMHB4OwogIGxlZnQ6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItdG9wOiAxMHB4IHNvbGQgd2hpdGU7Cn0KQGtleWZyYW1lcyBmYWRlSW4gewogIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSg1cHgpOyB9CiAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgwKTsgfQp9CiAgI2JvdHRvbS1iYXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDgwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHBhZGRpbmc6IDAgMjBweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjY2NjOwogIH0KICAjbWVzc2FnZXMgewogICAgd2lkdGg6IDMwJTsogIGhlaWdodDogMTAwJTsKICAgIG92ZXJmbG93LXk6IHNjcm9sbDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9CiAgI2NvbnRyb2xzIHsKICAgIGZsZXg6IDE7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGdhcDogMTBweDsKICB9CiAgI21zZ0lucHV0IHsKICAgIGZsZXg6IDE7CiAgICBwYWRkaW5nOiAxMnB4OwogICAgZm9udC1zaXplOiAxNnB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICB9CiAgI3NlbmRCdG4gewogICAgcGFkZGluZzogMTJweCAzMHB4OwogICAgZm9udC1zaXplOiAxNnB4OwogICAgYmFja2dyb3VuZDogIzI3YWU2MDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7CiAgfQogICNzZW5kQnRuOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6ICMyMjk1NDU7CiAgfQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPGRpdiBpZD0ibG9naW4iPgo8aDI+V2VsY29tZSB0byBCb25rZXl3b3JsZDwvaDI+CjxpbnB1dCBpZD0ibmlja25hbWUiIHBsYWNlaG9sZGVyPSJOaWNrbmFtZSIgdmFsdWU9ImFub255bW91cyIgLz48YnI+CjxpbnB1dCBpZD0icm9vbSIgcGxhY2Vob2xkZXI9IlJvb20gSUQiIHZhbHVlPSJkZWZhdWx0IiAvPjxicj4KPGJ1dHRvbiBvbmNsaWNrPSJqb2luUm9vbSgpIj5Kb2luPC9idXR0b24+CjwvZGl2PgoKPGRpdiBpZD0iY2hhdC11aSI+CjxkaXYgaWQ9IndvcmxkIj48L2Rpdj4KPGRpdiBpZD0iYm90dG9tLWJhciI+PGRpdiBpZD0ibWVzc2FnZXMiPjwvZGl2Pgo8ZGl2IGlkPSJjb250cm9scyI+CjxpbnB1dCBpZD0ibXNnSW5wdXQiIHBsYWNlaG9sZGVyPSJUeXBlIG1lc3NhZ2UuLi4iIC8+CjxidXR0b24gaWQ9InNlbmRCdG4iIG9uY2xpY2s9InNlbmRNZXNzYWdlKCkiPlNlbmQ8L2J1dHRvbj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KCjxzY3JpcHQgc3JjPSIvc29ja2V0LmlvL3NvY2tldC5pby5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQ+CmNvbnN0IHNvY2tldCA9IGlvKCk7CmxldCBjdXJyZW50Um9vbSA9ICIiOwpsZXQgbmlja25hbWUgPSAiIjsKCmZ1bmN0aW9uIGpvaW5Sb29tKCkgewogIG5pY2tuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25pY2tuYW1lJykudmFsdWUgfHwgJ2Fub255bW91cyc7CiAgY3VycmVudFJvb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vbScpLnZhbHVlIHx8ICdkZWZhdWx0JzsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LXVpJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgc29ja2V0LmVtaXQoJ2pvaW4nLCB7IG5pY2tuYW1lLCByb29tOiBjdXJyZW50Um9vbSB9KTsKfQoKZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXNnSW5wdXQnKTsKICBjb25zdCBtc2cgPSBpbnB1dC52YWx1ZS50cmltKCk7CiAgaWYgKCFtc2cpIHJldHVybjsKICAKICBzb2NrZXQuZW1pdCgnY2hhdE1lc3NhZ2UnLCB7CiAgICByb29tOiBjdXJyZW50Um9vbSwKICAgIG5hbWU6IG5pY2tuYW1lLAogICAgbXNnOiBtc2csCiAgICBzb2NrZXRJZDogc29ja2V0LmlkCiAgfSk7CiAgCiAgaW5wdXQudmFsdWUgPSAnJzsKfQoKLy8gRW50ZXIga2V5IHRvIHNlbmQKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21zZ0lucHV0JykuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4gewogIGlmIChlLmtleSA9PT0gJ0VudGVyJykgc2VuZE1lc3NhZ2UoKTsKfSk7CgovLyBlU3BlYWsgVFRTIGZvciBtZXNzYWdlcwpjb25zdCBzcGVlY2hTeW50aGVzaXMgPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hTeW50aGVzaXM7CmNvbnN0IHNwZWVjaFV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoKTsKCmZ1bmN0aW9uIHNwZWFrTWVzc2FnZSh0ZXh0KSB7CiAgaWYgKHNwZWVjaFN5bnRoZXNpcykgewogICAgY29uc3QgdXR0ZXJhbmNlID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSh0ZXh0KTsKICAgIHV0dGVyYW5jZS5waXRjaCA9IDEuMTsKICAgIHV0dGVyYW5jZS5yYXRlID0gMC45OwogICAgd2luZG93LnNwZWVjaFN5bnRoZXNpcy5zcGVhayh1dHRlcmFuY2UpOwogIH0KfQoKY29uc3Qgd29ybGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29ybGQnKTsKCi8vIFRlbXBvcmFyeSBzcGVlY2ggYnViYmxlcwpjb25zdCBzcGVlY2hCdWJibGVzID0ge307Cgpzb2NrZXQub24oJ3VwZGF0ZVVzZXJzJywgKHVzZXJzKSA9PiB7CiAgLy8gQ2xlYXIgd29ybGQgd2l0aG91dCByZW1vdmluZyBidWJibGVzIGlmIHBvc3NpYmxlCiAgd29ybGQuaW5uZXJIVE1MID0gJyc7CgogIGZvciAobGV0IGlkIGluIHVzZXJzKSB7CiAgICBjb25zdCB1c2VyID0gdXNlcnNbaWRdOwogICAgaWYgKHVzZXIucm9vbSA9PT0gY3VycmVudFJvb20pIHsKICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZWwuY2xhc3NOYW1lID0gJ3BsYWNlaG9sZGVyJzsKICAgICAgZWwuc3R5bGUubGVmdCA9IHVzZXIueCArICdweCc7CiAgICAgIGVsLnN0eWxlLnRvcCA9IHVzZXIueSArICdweCc7CiAgICAgIGVsLmlubmVyVGV4dCA9IHVzZXIubmlja25hbWU7CiAgICAgIGVsLmRhdGFzZXQuc29ja2V0SWQgPSBpZDsKICAgICAgCiAgICAgIGlmIChpZCA9PT0gc29ja2V0LmlkKSB7CiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICcjZTc0YzNjJzsKICAgICAgICBlbC5vbm1vdXNlZG93biA9IHN0YXJ0RHJhZzsKICAgICAgfQoKICAgICAgd29ybGQuYXBwZW5kQ2hpbGQoZWwpOwogICAgfQogIH0KfSk7Cgpzb2NrZXQub24oJ21lc3NhZ2UnLCAoZGF0YSkgPT4gewogIGNvbnN0IG1zZ0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlcycpOwogIG1zZ0JveC5pbm5lckhUTUwgKz0gYDxkaXY+PGI+JHtkYXRhLm5hbWV9OjwvYj4gJHtkYXRhLm1zZ308L2Rpdj5gOwogIG1zZ0JveC5zY3JvbGxUb3AgPSBtc2dCb3guc2Nyb2xsSGVpZ2h0Owp9KTsKCi8vIFNwZWVjaCBldmVudCBmb3IgZVNwZWFrIGJ1Y2tlbnRpbiAtIHVzZSBicm93c2VyIFRUUyBpbnN0ZWFkCnNvY2tldC5vbignc3BlZWNoJywgKGRhdGEpID0+IHsKICAvLyBVc2UgV2ViIFNwZWVjaCBBUEkgZm9yIFRUUwogIGlmIChkYXRhLmZyb20gIT09IHNvY2tldC5pZCkgewogICAgY29uc3Qgc3BlZWNoVGV4dCA9IGAke2RhdGEubmFtZX0gc2F5czogJHtkYXRhLm1zZ2A7CiAgICBzcGVha01lc3NhZ2Uoc3BlZWNoVGV4dCk7CiAgfQp9KTsKCi8vIFNwZWVjaCBidWJibGVzIGFib3ZlIGF2YXRhcnMKc29ja2V0Lm9uKCdjaGF0TWVzc2FnZScsIChkYXRhKSA9PiB7CiAgLy8gRG9uJ3QgcHJvY2VzcyBvd24gbWVzc2FnZXMgaGVyZQogIGlmIChkYXRhLnNvY2tldElkID09PSBzb2NrZXQuaWQpIHJldHVybjsKICAKICAvLyBTaG93IHNwZWVjaCBidWJibGUKICBjb25zdCB1c2VyRWwgPSB3b3JsZC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1zb2NrZXQtaWQ9IiR7ZGF0YS5zb2NrZXRJZH0iXWApOwogIGlmICh1c2VyRWwpIHsKICAgIC8vIFJlbW92ZSBleGlzdGluZyBidWJibGUgZm9yIHRoaXMgdXNlcgogICAgaWYgKHNwZWVjaEJ1YmJsZXNbZGF0YS5zb2NrZXRJZF0pIHsKICAgICAgc3BlZWNoQnViYmxlc1tkYXRhLnNvY2tldElkXS5yZW1vdmUoKTsKICAgIH0KICAgIAogICAgY29uc3QgYnViYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBidWJibGUuY2xhc3NOYW1lID0gJ3NwZWVjaC1idWJibGUnOwogICAgYnViYmxlLnRleHRDb250ZW50ID0gZGF0YS5tc2c7CiAgICB1c2VyRWwuYXBwZW5kQ2hpbGQoYnViYmxlKTsKICAgIHNwZWVjaEJ1YmJsZXNbZGF0YS5zb2NrZXRJZF0gPSBidWJibGU7CiAgICAKICAgIC8vIFJlbW92ZSBhZnRlciA1IHNlY29uZHMKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBidWJibGUucmVtb3ZlKCk7CiAgICAgIGRlbGV0ZSBzcGVlY2hCdWJibGVzW2RhdGEuc29ja2V0SWRdOwogICAgfSwgNTAwMCk7CiAgfQp9KTsKCmZ1bmN0aW9uIHN0YXJ0RHJhZyhlKSB7CiAgY29uc3QgZWwgPSBlLnRhcmdldDsKICBjb25zdCB1c2VySWQgPSBlbC5kYXRhc2V0LnNvY2tldElkOwogIAogIGZ1bmN0aW9uIG1vdXNlTW92ZShlKSB7CiAgICBsZXQgeCA9IGUuY2xpZW50WCAtIHdvcmxkLm9mZnNldExlZnQgLSAyNTsKICAgIGxldCB5ID0gZS5jbGllbnRZIC0gd29ybGQub2Zmc2V0VG9wIC0gMjU7CiAgICB4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oeCwgd29ybGQuY2xpZW50V2lkdGggLSA1MCkpOwogICAgeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHksIHdvcmxkLmNsaWVudEhlaWdodCAtIDUwKSk7CiAgICBlbC5zdHlsZS5sZWZ0ID0geCArICdweCc7CiAgICBlbC5zdHlsZS50b3AgPSB5ICsgJ3B4JzsKICAgIHNvY2tldC5lbWl0KCdtb3ZlJywgeyB4LCB5IH0pOwogIH0KCiAgZnVuY3Rpb24gbW91c2VVcCgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7CiAgfQoKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUpOwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTsKfQo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+